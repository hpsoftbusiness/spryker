{% extends molecule('product-item', '@SprykerShop:ShopUi') %}

{% define data = {
    cashback: null,
    shoppingPoints: null,
} %}

{% block extraClass %}
    {{ config.jsName }}
{% endblock %}

{% block body %}
    <div class="{{ config.name }}__container">
        <div class="{{ config.name }}__image-wrap">
            {% block imageContainer %}
                {{ parent() }}
            {% endblock %}

        </div>

            {% if data.idProductAbstract %}
                {% block productAbstractLabels %}
                    {% widget 'ProductAbstractLabelWidget' args [data.idProductAbstract] with {
                        data: {
                            parentJsName: config.jsName,
                        },
                    } only %}{% endwidget %}
                {% endblock %}
            {% endif %}


        {% block content %}
            <div class="{{ config.name }}__info">
                {% block name %}
                    {% if data.name and data.url %}
                        {% block link %}
                            {% widget 'ProductUrlWidget' args [data.product.is_affiliate ?? data.product.isAffiliate, data.product.affiliate_data ?? data.product.affiliateData] with {
                                data: {
                                    parentJsName: config.jsName,
                                    configName: config.name,
                                    dataName: data.name,
                                    originUrl: data.url,
                                },
                            } only %}{% endwidget %}
                        {% endblock %}
                    {% endif %}

                    {% if data.name and not data.url %}
                        {% block title %}
                            <span class="{{ config.name }}__name {{ config.jsName }}__name">{{ data.name }}</span>
                        {% endblock %}
                    {% endif %}
                {% endblock %}

                {% block price %}
                    <div class="{{ config.name }}__price">
                        {% if can('SeePricePermissionPlugin') %}
                            {% embed molecule('money-price') with {
                                data: {
                                    isAffiliate: data.product.is_affiliate | default(false),
                                    amount: data.product.prices.DEFAULT | default(null),
                                    originalAmount: data.product.prices.ORIGINAL | default(null),
                                    currencyIsoCode: data.currencyIsoCode,
                                    parentJsName: config.jsName,
                                },
                            } only %}
                                {% block originalPrice %}
                                    {% block originalPriceInner %}
                                        {{ parent() }}
                                    {% endblock %}
                                {% endblock %}
                            {% endembed %}
                        {% else %}
                            {{- 'customer.access.cannot_see_price' | trans -}}
                        {% endif %}
                    </div>
                {% endblock %}
            </div>

            {% block footer %}
                {% set cashback = data.cashback %}

                {% if cashback %}
                    <div class="{{ config.name }}__footer">
                        {% include molecule('cashback') with {
                            modifiers: ['small'],
                            data: {
                                cashback: cashback,
                                shoppingPoints: data.shoppingPoints,
                                iconModifiers: [''],
                            },
                        } only %}
                    </div>
                {% endif %}
            {% endblock %}
        {% endblock %}
    </div>
{% endblock %}

{% block image %}
    {% set extraClass = '' %}
    {% set modifiers = ['spaceless'] %}

    {% block productThumbnail %}
        {% widget 'ProductUrlWidget' args [data.product.is_affiliate ?? data.product.isAffiliate, data.product.affiliate_data ?? data.product.affiliateData] with {
            data: {
                parentJsName: config.jsName,
                configName: config.name,
                dataName: data.name,
                originUrl: data.url,
                thumbnail: macros.thumbnail(data.image, data.name, extraClass, modifiers, config.jsName),
            },
        } only %}{% endwidget %}
    {% endblock %}
{% endblock %}
